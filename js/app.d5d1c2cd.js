(function(t){function e(e){for(var o,i,r=e[0],l=e[1],c=e[2],u=0,p=[];u<r.length;u++)i=r[u],s[i]&&p.push(s[i][0]),s[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],o=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(o=!1)}o&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},s={app:0},n=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0466":function(t,e,a){},"04da":function(t,e,a){t.exports=a.p+"img/published-potlucks-unavailable.0262e995.png"},"0596":function(t,e,a){},"05b7":function(t,e,a){},"0b5b":function(t,e,a){"use strict";var o=a("cb0e"),s=a.n(o);s.a},"0c8f":function(t,e,a){"use strict";var o=a("ca4a"),s=a.n(o);s.a},"296e":function(t,e,a){t.exports=a.p+"img/not-found-logo.2961e2f5.png"},"33e7":function(t,e,a){"use strict";var o=a("6be1"),s=a.n(o);s.a},3426:function(t,e,a){},"3c20":function(t,e,a){t.exports=a.p+"img/food-list-not-found.ee583e97.png"},4005:function(t,e,a){},4268:function(t,e,a){},"426c":function(t,e,a){t.exports=a.p+"img/food-bg.62b8bf1a.jpg"},"44bf":function(t,e,a){"use strict";var o=a("4005"),s=a.n(o);s.a},4678:function(t,e,a){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=n(t);return a(e)}function n(t){var e=o[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}s.keys=function(){return Object.keys(o)},s.resolve=n,t.exports=s,s.id="4678"},"4edf":function(t,e,a){},5074:function(t,e,a){t.exports=a.p+"img/menu-bg.fafcc64c.jpg"},"53d7":function(t,e,a){"use strict";var o=a("730d"),s=a.n(o);s.a},5452:function(t,e,a){"use strict";var o=a("0596"),s=a.n(o);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var o=a("2b0e"),s=a("e069"),n=a.n(s),i=a("c1df"),r=a.n(i),l=(a("dcad"),a("69c5")),c=a.n(l),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a(t.layout,{tag:"component"},[a("router-view")],1)],1)},u=[],p="default",f={computed:{layout:function(){return(this.$route.meta.layout||p)+"-layout"}}},g=f,m=(a("5c0b"),a("2877")),h=Object(m["a"])(g,d,u,!1,null,null,null),_=h.exports,v=a("8c4f"),b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},y=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"not-found-wrapper"},[o("img",{staticClass:"not-found-logo",attrs:{src:a("296e")}}),t._v("\\\n  "),o("h3",{staticClass:"not-found-text"},[t._v("Site Not Found")])])}],k=(a("fe0d"),{}),C=Object(m["a"])(k,b,y,!1,null,null,null),w=C.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("Login vue")])},x=[],P={},S=Object(m["a"])(P,j,x,!1,null,null,null),F=S.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"login-card"},[a("h3",{staticClass:"header"},[t._v("Login")]),a("Divider",{staticClass:"divider",attrs:{size:"small"}}),a("Form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.loginRules,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.handleSubmit("loginForm")}}},[a("FormItem",{attrs:{label:"Email",prop:"email"}},[a("Input",{attrs:{type:"text",size:"large",placeholder:"Enter your email"},model:{value:t.loginForm.email,callback:function(e){t.$set(t.loginForm,"email",e)},expression:"loginForm.email"}})],1),a("FormItem",{staticClass:"mb-10",attrs:{label:"password",prop:"password"}},[a("Input",{attrs:{type:"password",size:"large",placeholder:"Enter you password"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),a("br"),a("input",{staticStyle:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},attrs:{type:"submit",tabindex:"-1"}}),a("FormItem",{staticClass:"text-center"},[a("Button",{attrs:{type:"primary",loading:t.loginLoading,size:"large",long:""},on:{click:function(e){return t.handleSubmit("loginForm")}}},[t.loginLoading?a("span",[t._v("Processing...")]):a("span",[t._v("Sign In")])])],1)],1)],1)],1)},E=[],O=(a("7f7f"),a("bc3a")),L=a.n(O),R="http://breakbread.superstudy.io/",D=R+"api/",$=R,z=$+"api-token-auth/",M=$+"api/signup/",V={user:{authenticated:!1},login:function(t){var e=this;return new Promise(function(a,o){L.a.post(z,t).then(function(t){var s=t.data;if(s.error)o(s.error);else{var n=s.token,i=s.user;localStorage.setItem("access_token",n),localStorage.setItem("email",i.email),localStorage.setItem("username",i.first_name),localStorage.setItem("is_admin",i.is_superuser),e.user.authenticated=!0,a(s)}},function(t){o(t)})})},signup:function(t){var e=this;return new Promise(function(a,o){L.a.post(M,t).then(function(t){var s=t.data;s.error?o(s.error):(localStorage.setItem("access_token",s.access),localStorage.setItem("refresh_token",s.refresh),e.user.authenticated=!0,a(s))},function(t){o(t)})})},logout:function(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("email"),localStorage.removeItem("username"),localStorage.removeItem("is_admin"),this.user.authenticated=!1,Le.push("/login")},getUserInfo:function(){if(localStorage.getItem("access_token"))return{refresh_token:localStorage.getItem("refresh_token"),email:localStorage.getItem("email"),username:localStorage.getItem("username"),is_admin:localStorage.getItem("is_admin")};this.user.authenticated=!1},checkAuth:function(){var t=localStorage.getItem("access_token");this.user.authenticated=!!t},getAuthHeader:function(){return{Authorization:"JWT "+localStorage.getItem("access_token")}}},G={data:function(){var t=function(t,e,a){var o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;""===e?a(new Error("Enter you email")):(o.test(String(e).toLowerCase())||a(new Error("Please enter valid email")),a())};return{loginLoading:!1,loginForm:{email:"",password:""},loginRules:{email:[{validator:t,trigger:"blur",required:!0}],password:[{required:!0,message:"Please fill in the password.",trigger:"blur"},{type:"string",min:6,message:"The password length cannot be less than 6 bits",trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e=this,a=JSON.parse(JSON.stringify(this.loginForm));this.$refs[t].validate(function(t){t?V.login(a).then(function(t){Le.go("/")}).catch(function(t){e.$Notice.error({title:"Error Login",desc:t}),console.log(t)}):e.$Notice.error({title:"Invalid Form",desc:"Please enter valid email and password"})})}}},N=G,A=(a("5ce1"),Object(m["a"])(N,I,E,!1,null,null,null)),U=A.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"content-inner"},[a("div",{staticClass:"search-box"},[a("Row",[a("Col",{staticClass:"search-header",attrs:{span:"24"}},[t._v("Search Criteria")])],1),a("Form",{attrs:{"label-position":"top"}},[a("Row",{attrs:{gutter:16,align:"bottom",type:"flex"}},[t._l(t.surveyGrid.headers,function(e,o){return a("Col",{attrs:{span:"3"}},[a("FormItem",{attrs:{label:e.title}},[a("Input",{attrs:{clearable:""},model:{value:t.surveyGrid.filterObj[e.key],callback:function(a){t.$set(t.surveyGrid.filterObj,e.key,a)},expression:"surveyGrid.filterObj[filterValue.key]"}})],1)],1)}),a("Col",{attrs:{span:"3"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.dataGrid.gridFilter()}}},[t._v("Search")])],1)],2)],1)],1),a("Grid",{ref:"dataGrid",attrs:{config:t.surveyGrid},scopedSlots:t._u([{key:"grid_no-data",fn:function(){return[a("Icon",{staticClass:"td--no-data-found__icon",attrs:{type:"md-list-box"}}),a("br"),t._v("\n          No surveys found\n      ")]},proxy:!0}])})],1)])},q=[],T=a("cebc"),J={baseURL:D,transformRequest:[function(t,e){return t}],transformResponse:[function(t){return t}],headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},hasPermission:!1,withCredentials:!1,responseType:"json",responseEncoding:"utf8"},H=J,W=L.a.create(H);W.interceptors.request.use(function(t){return t.hasPermission||(t.headers=Object(T["a"])({},t.headers,V.getAuthHeader())),t.url="".concat(t.baseURL).concat(t.url),t},function(t){return Promise.reject(t)}),W.interceptors.response.use(function(t){var e,a=t.data;return a.error&&(e=a.error||{},a={error:{status:"ERROR",code:e.errorCode||"Unknown",message:e.description||"Unknown Error"}}),a},function(t){var e,a,o=t.response||{},s=o.status,n="ERROR";return 401===o.status?o.data&&o.data.detail?("Signature has expired."===o.data.detail&&V.logout(),e=o.data.detail):e="Unauthorized":e=o.data&&o.data.message?o.data.message:404===o.status?"Item not found":"Unexpected error occurred. Please contact system administrator.",a={status:n,code:s,message:e},Promise.reject(a)});var K=W,Y=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"grid"},[o("div",{staticClass:"grid-options-bar"},[o("div",{staticClass:"grid-options-bar__title"},[t._v(t._s(t.title))]),o("div",{staticClass:"grid-options-bar__pagination-info"},[t._v(t._s((t.currentPage-1)*t.pageSize+1)+" - "+t._s(t.currentPage*t.pageSize>t.totalRecords?t.totalRecords:t.currentPage*t.pageSize)+" of "+t._s(t.totalRecords)+"\n          ")]),o("div",{staticClass:"grid-actions"},[o("div",{staticClass:"grid-actions__item",on:{click:function(e){return t.gridPaginate(t.previousPage)}}},[o("Icon",{staticClass:"grid-actions__item__icon",attrs:{type:"ios-arrow-back"}})],1),o("div",{staticClass:"grid-actions__item",on:{click:function(e){return t.gridPaginate(t.nextPage)}}},[o("Icon",{staticClass:"grid-actions__item__icon",attrs:{type:"ios-arrow-forward"}})],1),o("div",{staticClass:"grid-actions__item"},[o("Icon",{staticClass:"grid-actions__item__icon",attrs:{type:"ios-expand"}})],1),t.options.can_upload?o("div",{staticClass:"grid-actions__item",on:{click:function(e){t.showUploadModal=!0}}},[o("Icon",{staticClass:"grid-actions__item__icon",attrs:{type:"md-cloud-upload"}})],1):t._e(),t.options.can_upload?o("div",{staticClass:"grid-actions__item",on:{click:t.exportCSV}},[o("Icon",{staticClass:"grid-actions__item__icon",attrs:{type:"ios-cloud-download-outline"}})],1):t._e(),o("div",{staticClass:"grid-actions__item",on:{click:function(e){return t.gridReset()}}},[o("Icon",{staticClass:"grid-actions__item__icon",attrs:{type:"md-refresh"}})],1),t.options.can_add?o("div",{staticClass:"grid-actions__item",on:{click:function(e){return t.gridAddRow()}}},[o("Icon",{staticClass:"grid-actions__item__icon",attrs:{type:"md-add"}})],1):t._e()])]),o("div",{staticClass:"grid-table"},[t.show_header?o("div",{staticClass:"grid-table__header"},[o("div",{staticClass:"grid-table__header__row"},[t._l(t.headers,function(e,a){return o("div",{key:a,staticClass:"th noselect",class:{"sorted-asc":e.key==t.sortKey,"sorted-des":"-"+e.key==t.sortKey},on:{click:function(a){return t.gridSort(e.key)}}},[t._v("\n                      "+t._s(e.title.toLocaleUpperCase())+"\n                      "),o("div",{staticClass:"sort-block"},[o("Icon",{staticClass:"sort-block__icon sort-block__icon--asc",attrs:{type:"md-arrow-dropup"}}),o("Icon",{staticClass:"sort-block__icon sort-block__icon--des",attrs:{type:"md-arrow-dropdown"}})],1)])}),t.show_spacer?o("div",{staticClass:"th noselect th--spacer"},[o("Icon",{attrs:{type:"md-more"}})],1):t._e()],2)]):t._e(),o("div",{staticClass:"grid-table__body"},[t._l(t.newGridResults,function(e,a){return o("div",{key:a,staticClass:"grid-table__body__row"},[t._t("grid_data_new_td",null,{newGridResults:t.newGridResults,newGridRow:e,newGridRowIndex:a,gridAdd:t.gridAdd})],2)}),t._t("grid_data_row",t._l(t.gridResults,function(e,a){return o("div",{key:a,staticClass:"grid-table__body__row"},[t._l(t.filterObj,function(a,s,n){return o("div",{key:n,staticClass:"td"},[t._v(t._s(e[s]))])}),t.show_spacer?o("div",{staticClass:"td td--spacer"}):t._e()],2)}),{gridResults:t.gridResults,filterObj:t.filterObj})],2)]),0==t.newGridResults.length&&0==t.gridResults.length&&0==t.gridLoading?o("div",{staticClass:"grid-table"},[o("div",{staticClass:"grid-table__body__row"},[o("div",{staticClass:"td td--no-data-found"},[t._t("grid_no-data",[o("Icon",{staticClass:"td--no-data-found__icon",attrs:{type:"ios-albums-outline"}}),o("br"),t._v("\n              No Data Found\n            ")])],2)])]):t._e(),1==t.gridLoading?o("div",{staticClass:"grid-table"},[o("div",{staticClass:"grid-table__body__row"},[o("div",{staticClass:"td td--loading"},[t._t("grid_loading",[o("img",{staticClass:"td--loading__img",attrs:{src:a("c115")}})])],2)])]):t._e()]),o("Modal",{staticClass:"uploads-modal",attrs:{width:"40%"},model:{value:t.showUploadModal,callback:function(e){t.showUploadModal=e},expression:"showUploadModal"}},[o("p",{attrs:{slot:"header"},slot:"header"},[o("span",[t._v("Import surveys by CSV file")])]),o("div",{staticClass:"upload-widget-container",class:{"upload-widget-disabled":!!t.csvFile},staticStyle:{"text-align":"center"}},[o("Upload",{attrs:{type:"drag",action:"http://localhost:8000/api/potluck/","before-upload":t.handleCSVUpload,disabled:!!t.csvFile,accept:".csv"}},[o("div",{staticStyle:{padding:"20px 0"}},[o("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),o("p",[t._v("Click or drag csv files here to upload")])],1)]),o("div",{staticClass:"file-container"},[t.csvFile?o("div",{staticClass:"csv-file-name"},[t._v(t._s(t.csvFile.name)+" "),o("Icon",{attrs:{type:"ios-close-circle-outline"},on:{click:function(e){t.csvFile=null}}})],1):t._e()])],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{size:"large"},on:{click:function(e){t.csvFile=null,t.showUploadModal=!1}}},[t._v("Cancel")]),o("Button",{attrs:{type:"primary",disabled:!t.csvFile,size:"large",loading:t.showUploadModal_loading},on:{click:t.importCSV}},[t._v("Upload")])],1)])],1)},Z=[],X=a("768b"),Q=(a("ac6a"),a("ffc1"),a("28a5"),{data:function(){var t={csvUrl:"",title:"",apiUrl:"",sortKey:"",queryObj:{},pageSize:10,totalRecords:0,nextPage:null,previousPage:null,currentPage:1,showUploadModal:!1,showUploadModal_loading:!1,csvFile:void 0,gridResults:[],newGridResults:[],gridLoading:!1,filterObj:{},show_header:!0,show_spacer:!1,options:{can_download:!0,can_upload:!0,can_add:!1}},e=Object(T["a"])({},t.options,this.config.options);return Object(T["a"])({},t,this.config,{options:e})},methods:{gridAddRow:function(){this.newGridResults.push(this.headers.reduce(function(t,e,a,o){return t[e["key"]]="",t},{}))},gridPropsReset:function(){this.queryObj={},this.pageSize=10,this.totalRecords=0},gridReset:function(){this.currentPage=1,this.gridPropsReset(),this.gridLoad()},handleCSVUpload:function(t){return this.csvFile=t,!1},importCSV:function(){var t=this,e=new FormData;e.append("file",this.csvFile),K.post(this.csvUrl,e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){t.$Notice.success({title:"Success",desc:e.message}),t.gridLoad()}).catch(function(e){t.$Notice.error({title:"Error",desc:e})}).finally(function(){t.csvFile=null,t.showUploadModal=!1})},exportCSV:function(){var t=this;K.get(this.csvUrl,{responseType:"stream",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"text/csv"}}).then(function(e){var a=new Blob([e],{type:"text/csv"}),o=t.title.split(" ").join("_");if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,o);else{var s=window.document.createElement("a");s.href=window.URL.createObjectURL(a),s.download=o,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}).catch(function(e){t.$Notice.error({title:"Error",desc:e})})},gridAdd:function(t,e){var a=this;K.post(this.apiUrl,JSON.stringify(t)).then(function(t){a.$Notice.success({title:"Success",desc:"Row Added Successfully"}),a.newGridResults.splice(e,1),a.gridLoad()}).catch(function(t){a.$Notice.error({title:"Error",desc:t})})},gridLoad:function(){var t=this,e={params:JSON.parse(JSON.stringify(this.queryObj))};this.gridLoading=!0,this.gridResults=[],this.totalRecords=0,K.get(this.apiUrl,Object(T["a"])({},e)).then(function(e){t.gridResults=e.results,t.totalRecords=+e.count,t.nextPage=e.next&&+new URL(e.next).searchParams.get("page")||null,t.previousPage=e.previous&&new URL(e.previous).searchParams.get("page")||1}).catch(function(e){t.$Notice.error({title:"Error",desc:e.message}),t.handleReset("formValidate")}).finally(function(){t.gridLoading=!1})},gridPaginate:function(t){t&&t!=this.currentPage?(this.currentPage=t,this.queryObj["page"]=t,this.gridLoad()):delete this.queryObj["page"]},gridSort:function(t){this.sortKey=this.sortKey==t?"-"+t:(this.sortKey,t),this.currentPage=1,this.queryObj["ordering"]=this.sortKey,this.addFilterParams(),this.gridPaginate(),this.gridLoad()},addFilterParams:function(){for(var t=JSON.parse(JSON.stringify(this.filterObj)),e=0,a=Object.entries(t);e<a.length;e++){var o=Object(X["a"])(a[e],2),s=o[0],n=o[1];n=n.trim(),n?this.queryObj[s+"__icontains"]=n:delete this.queryObj[s+"__icontains"]}},gridFilter:function(){this.addFilterParams(),this.gridPaginate(),this.gridLoad()}},beforeMount:function(){this.gridLoad()},props:["config"]}),tt=Q,et=(a("33e7"),Object(m["a"])(tt,Y,Z,!1,null,null,null)),at=et.exports,ot={data:function(){return{surveyGrid:{queryObj:{},csvUrl:"potluck/survey_csv/",title:"Survey Registries",apiUrl:"potluck/surveys/",headers:[{title:"Name",key:"name"},{title:"Email",key:"email"},{title:"Phone",key:"phone"},{title:"Zipcode",key:"zipcode"},{title:"Ethnic Persuasion",key:"ethnic_persuasion"},{title:"Availability",key:"availability"},{title:"Hosting At",key:"hosting_at"}],filterObj:{name:"",email:"",phone:"",zipcode:"",ethnic_persuasion:"",availability:"",hosting_at:""}}}},components:{Grid:at},methods:{updateFilterObj:function(t,e){e.reduce(function(t,e,a,o){return t[e["key"]]="",t},{})},beforeMount:function(){console.log("before mounted")}}},st=ot,nt=(a("6acb"),Object(m["a"])(st,B,q,!1,null,null,null)),it=nt.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"survey-form"},[a("h1",{staticClass:"jumbo-text text-center"},[t._v("BREAK BREAD WINSTON-SALEM")]),a("p",{staticClass:"description"},[t._v("\n      You are invited to join Love Out Loud, the New Canaan Society, and the Skunkworks Committee on Racial Reconciliation in following Jesus' model of breaking bread together in private homes with people different than ourselves. Break Bread Winston-Salem is an evening of private dinners across our city the goal of which is to gather in the name of Jesus and grow relationally as a city by meeting new people, working on challenging cultural blind spots, and sharing our hopes and burdens. We desire to foster relationships across racial, geographical, socio-economic and denominational lines in our city.\n      Each dinner will have two couples or individuals as co-hosts and will engage 10-12 people per home. Dinner menu and location will be decided by the co-hosts who will also serve as discussion facilitators through the meal, with suggested readings distributed ahead of time.\n    ")]),0==t.isFormSubmitted?a("Form",{ref:"formValidate",staticClass:"form",attrs:{model:t.formValidate,rules:t.ruleValidate}},[a("h1",{staticClass:"form-header"},[t._v("Registration Form")]),a("div",{staticClass:"form-description"},[t._v("\n        All the\n        "),a("span",{staticClass:"error"},[t._v("*")]),t._v("fields are mandatory\n      ")]),a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"11"}},[a("label",[a("span",{staticClass:"error"},[t._v("*")]),t._v("Name:\n          ")]),a("FormItem",{attrs:{prop:"name"}},[a("Input",{attrs:{size:"large",placeholder:"Enter"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1)],1),a("Col",{attrs:{span:"11"}},[a("label",[a("span",{staticClass:"error"},[t._v("*")]),t._v("Email:\n          ")]),a("FormItem",{attrs:{prop:"email"}},[a("Input",{attrs:{size:"large",placeholder:"your@email.com"},model:{value:t.formValidate.email,callback:function(e){t.$set(t.formValidate,"email",e)},expression:"formValidate.email"}})],1)],1)],1),a("br"),a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"11"}},[a("label",[a("span",{staticClass:"error"},[t._v("*")]),t._v("Phone:\n          ")]),a("FormItem",{attrs:{prop:"phone"}},[a("Input",{attrs:{size:"large",placeholder:"Enter"},model:{value:t.formValidate.phone,callback:function(e){t.$set(t.formValidate,"phone",t._n(e))},expression:"formValidate.phone"}})],1)],1),a("Col",{attrs:{span:"11"}},[a("label",[a("span",{staticClass:"error"},[t._v("*")]),t._v("Zip Code:\n          ")]),a("FormItem",{attrs:{prop:"zipcode"}},[a("Input",{attrs:{size:"large",placeholder:"Enter Zip Code"},model:{value:t.formValidate.zipcode,callback:function(e){t.$set(t.formValidate,"zipcode",e)},expression:"formValidate.zipcode"}})],1)],1)],1),a("br"),a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"11"}},[a("label",[a("span",{staticClass:"error"},[t._v("*")]),t._v("Ethnic persuasion:\n          ")]),a("FormItem",{attrs:{prop:"ethnic_persuasion"}},[a("Select",{staticStyle:{width:"100%"},model:{value:t.formValidate.ethnic_persuasion,callback:function(e){t.$set(t.formValidate,"ethnic_persuasion",e)},expression:"formValidate.ethnic_persuasion"}},[a("Option",{attrs:{value:"black or african american"}},[t._v("Black or African American")]),a("Option",{attrs:{value:"white"}},[t._v("white")]),a("Option",{attrs:{value:"prefer not to say"}},[t._v("prefer not to say")])],1)],1)],1),a("Col",{attrs:{span:"11"}},[a("label",[a("span",{staticClass:"error"},[t._v("*")]),t._v("Availability:\n          ")]),a("FormItem",{attrs:{prop:"available_at"}},[a("CheckboxGroup",{model:{value:t.formValidate.available_at,callback:function(e){t.$set(t.formValidate,"available_at",e)},expression:"formValidate.available_at"}},[a("Checkbox",{attrs:{label:"Tuesday"}}),a("Checkbox",{attrs:{label:"Thursday"}})],1)],1)],1)],1),a("br"),a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"11"}},[a("label",[a("span",{staticClass:"error"},[t._v("*")]),t._v(" 1-2 involved:\n          ")]),a("FormItem",{attrs:{prop:"involved"}},[a("Input",{attrs:{size:"large",placeholder:"Enter the count of people attending",type:"textarea"},model:{value:t.formValidate.involved,callback:function(e){t.$set(t.formValidate,"involved",e)},expression:"formValidate.involved"}})],1)],1),a("Col",{attrs:{span:"11"}},[a("label",[t._v("Church affiliation:")]),a("FormItem",{attrs:{prop:"church_affiliation"}},[a("Input",{attrs:{size:"large",placeholder:"Enter affiliation info",type:"textarea"},model:{value:t.formValidate.church_affiliation,callback:function(e){t.$set(t.formValidate,"church_affiliation",e)},expression:"formValidate.church_affiliation"}})],1)],1)],1),a("br"),a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"11"}},[a("label",[a("span",{staticClass:"error"},[t._v("*")]),t._v(" Will you host in your home / park / church fellowship hall?\n          ")]),a("br"),a("FormItem",{attrs:{prop:"hosting_at"}},[a("RadioGroup",{model:{value:t.formValidate.hosting_at,callback:function(e){t.$set(t.formValidate,"hosting_at",e)},expression:"formValidate.hosting_at"}},[a("Radio",{attrs:{label:"home"}},[t._v("Home")]),a("Radio",{attrs:{label:"church"}},[t._v("Church")])],1)],1)],1),a("Col",{attrs:{span:"11"}},[a("label",[t._v("Dietary restrictions or allergies")]),a("br"),a("FormItem",{attrs:{prop:"dietary_restrictions_or_allergies"}},[a("Input",{attrs:{size:"large",placeholder:"Enter if any dietary priorities or allergic foods",type:"textarea"},model:{value:t.formValidate.dietary_restrictions_or_allergies,callback:function(e){t.$set(t.formValidate,"dietary_restrictions_or_allergies",e)},expression:"formValidate.dietary_restrictions_or_allergies"}})],1)],1)],1),a("br"),a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"24"}},[a("label",[a("span",{staticClass:"error"},[t._v("*")]),t._v("How Did you hear about Break Bread?\n          ")]),a("br"),a("FormItem",{attrs:{prop:"heard_from"}},[a("CheckboxGroup",{model:{value:t.formValidate.heard_from,callback:function(e){t.$set(t.formValidate,"heard_from",e)},expression:"formValidate.heard_from"}},t._l(t.heard_from_options,function(e,o){return"default"==e["type"]?a("div",{key:e.id},[a("Checkbox",{attrs:{label:e.medium}},[t._v(t._s(e.medium))]),a("br")],1):t._e()}),0)],1),"other"===t.formValidate.heard_from?a("FormItem",{attrs:{prop:"other_medium"}},[a("Input",{attrs:{size:"large",placeholder:"Enter the source",type:"textarea"},model:{value:t.formValidate.other_medium,callback:function(e){t.$set(t.formValidate,"other_medium",e)},expression:"formValidate.other_medium"}}),a("br")],1):t._e(),a("label",[t._v("Comments or Questions")]),a("br"),a("FormItem",{attrs:{prop:"comments_and_queries"}},[a("Input",{attrs:{size:"large",placeholder:"Enter any comments or queries",type:"textarea"},model:{value:t.formValidate.comments_and_queries,callback:function(e){t.$set(t.formValidate,"comments_and_queries",e)},expression:"formValidate.comments_and_queries"}})],1)],1)],1),a("Button",{attrs:{type:"info"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("SUBMIT")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("Reset")])],1):a("Card",{staticClass:"success-card"},[a("div",{staticStyle:{"text-align":"center"}},[a("Icon",{attrs:{type:"md-checkmark-circle-outline"}}),a("h3",[t._v("You have been successfully registered")])],1)])],1),a("Modal",{attrs:{width:"50%",title:"Agreement","on-cancel":"agree(false)","ok-text":"Agree","cancel-text":"Disagree","class-name":"agree-modal"},on:{"on-ok":function(e){return t.agree(!0)}},model:{value:t.openIsAgreeModal,callback:function(e){t.openIsAgreeModal=e},expression:"openIsAgreeModal"}},[a("div",{staticClass:"heading"},[t._v("Agreement that personal information can be used by New Canaan Society or Love out Loud to facilitate the Break Bread engagement â€“ including representation that your email and personal information will never be sold or provided to a 3rd party - You will always have an opportunity to opt out . . . and other legal stuff . . .")]),a("p",{staticClass:"helper"},[t._v("Agreement that you are notionally committing to")]),a("ul",{staticClass:"content"},[a("li",[t._v("6 dinners that rotate to different locations")]),a("li",[t._v("participating in potluck style with your participation in rotating meal items (takeout is always okay too)")]),a("li",[t._v("willingness to listen and engage with others that will have different backgrounds in their upbringing, community, and faith journey")])])])],1)},lt=[],ct=a("bd86"),dt={data:function(){var t=this,e=function(t,e,a){var o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;""===e?a(new Error("Enter you email")):(o.test(String(e).toLowerCase())||a(new Error("Please enter valid email")),a())},a=function(t,e,a){var o=/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/;""===e?a(new Error("Enter your number")):(o.test(e)||a(new Error("Enter valid number")),a())},o=function(t,e,a){var o=/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e);""===e?a(new Error("Enter zip code")):(o||a(new Error("Enter valid zip code")),a())},s=function(e,a,o){"other"===t.formValidate.heard_from&&""==a&&o(new Error("Please enter the other source")),o()},n=function(t,e,a){""===e&&a(new Error("Please choose the source you heard from ")),a()},i=function(e,a,o){0===a.length?o(new Error("Please check the available time")):t.formValidate.availability=0==a.length?a[0].toLocaleLowerCase():"tuesday and thursday",o()};return{openIsAgreeModal:!1,isFormSubmitted:!1,heard_from_options:{},formValidate:Object(ct["a"])({name:"",email:"",phone:"",zipcode:"",ethnic_persuasion:"",involved:"",church_affiliation:"",available_at:[],availability:"",hosting_at:"",dietary_restrictions_or_allergies:"",heard_from:[],other:"",comments_and_queries:"",other_medium:"",is_agreed:!1},"comments_and_queries",""),ruleValidate:{name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],email:[{validator:e,trigger:"blur"}],phone:[{validator:a,trigger:"blur"}],zipcode:[{validator:o,trigger:"blur"}],other_medium:[{validator:s,trigger:"blur"}],ethnic_persuasion:[{required:!0,message:"Choose one ethnic persuasion",trigger:"change"}],involved:[{required:!0,message:"Please enter number of individuals involved",trigger:"blur"}],available_at:[{validator:i,trigger:"change"}],hosting_at:[{required:!0,message:"Please choose the hosting location",trigger:"change"}],heard_from:[{validator:n,trigger:"change"}]}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.openIsAgreeModal=!0:e.$Notice.error({title:"Submission Error",desc:"Validation errors should be resolved"})})},handleReset:function(t){this.$refs[t].resetFields()},agree:function(t){var e=this;this.formValidate.is_agreed=t,this.formValidate["survey_meta_data"]={};var a=JSON.stringify(this.formValidate);K.post("potluck/surveys/",a,{hasPermission:!0}).then(function(t){e.isFormSubmitted=!0,e.handleReset("formValidate")}).catch(function(t){console.log(t),e.handleReset("formValidate")})}},beforeMount:function(){var t=this;K.get("potluck/heardfrom/",{hasPermission:!0}).then(function(e){t.heard_from_options=e.results}).catch(function(t){console.log(t)})}},ut=dt,pt=(a("87dc"),Object(m["a"])(ut,rt,lt,!1,null,"543e8b68",null)),ft=pt.exports,gt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content-inner"},[o("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"large"},on:{click:t.loadGroups}},[o("Icon",{staticStyle:{"font-size":"22px","margin-right":"10px"},attrs:{type:"ios-shuffle"}}),o("span",[t._v("Randomize")])],1),o("Button",{attrs:{size:"large"},on:{click:t.resetGroups}},[o("Icon",{staticStyle:{"font-size":"22px","margin-right":"10px"},attrs:{type:"ios-refresh"}}),t._v("Reset\n  ")],1),o("Row",{staticClass:"code-row-bg",staticStyle:{"margin-top":"10px","margin-bottom":"30px"},attrs:{gutter:50}},[t._l(t.groups,function(e){return 0!=t.groups.length&&0==t.groupsLoading?o("Col",{staticStyle:{"margin-top":"30px"},attrs:{span:"8"}},[o("PotluckTail",{attrs:{group:e,lockGroup:t.lockGroup,makeManager:t.makeManager,undoManager:t.undoManager}})],1):t._e()}),0==t.groups.length&&0==t.groupsLoading?o("Col",{staticClass:"groups-not-found",attrs:{span:"24"}},[o("img",{staticClass:"groups-not-found__image",attrs:{src:a("a705")}}),o("div",{staticClass:"groups-not-found__description"},[t._v("No groups found")])]):t._e(),1==t.groupsLoading?o("Col",{staticStyle:{"margin-top":"50px","text-align":"center"},attrs:{span:"24"}},[o("img",{staticStyle:{"max-width":"180px"},attrs:{src:a("c115")}})]):t._e()],2)],1)},mt=[],ht=(a("a481"),function(){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e"];function e(e){for(var a=0;a<6;a++){var o=Math.round(14*Math.random()),s=t[o];e+=s}return e}var a=e("#"),o=e("#"),s=Math.round(360*Math.random()),n="linear-gradient("+s+"deg, "+a+", "+o+")";return n}),_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("Row",[a("Col",{attrs:{span:"3"}},[a("div",{staticClass:"name-avatar",style:t.group.group_meta_data.avatar_gradient},[t._v(" "+t._s(t.group.name[0]))])]),a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"group-name"},[t._v(t._s(t.group.name))])]),"locked"==t.group.status?a("Col",{staticClass:"text-right",attrs:{span:"9"}},[a("Icon",{staticClass:"potluck-action potluck-action--unlock",attrs:{type:"ios-unlock"},on:{click:function(e){return t.unlockPotluck(t.group.id)}}}),a("Button",{staticStyle:{padding:"2px 8px"},attrs:{type:"info",icon:"md-checkbox-outline"},on:{click:function(e){return t.publishPotluck(t.group)}}},[a("span",[t._v("Publish")])])],1):t._e(),"published"==t.group.status?a("Col",{staticClass:"text-right",attrs:{span:"9"}},[a("div",{staticClass:"potluck-date-info"},[t._v(t._s(t._f("formatDate")(t.group.hosting_on)))])]):t._e(),t.group.isManagerAssigned?a("Col",{staticClass:"text-right",attrs:{span:"9"}},[a("Icon",{staticClass:"potluck-action potluck-action--undo",staticStyle:{"font-size":"18px",padding:"5px","margin-right":"5px",color:"gray",cursor:"pointer"},attrs:{type:"ios-undo"},on:{click:function(e){return t.undoManager(t.group)}}}),a("Button",{staticStyle:{padding:"2px 8px"},attrs:{type:"info",icon:"ios-unlock"},on:{click:function(e){return t.lockGroup(t.group)}}},[a("span",[t._v("Lock-In")])])],1):t._e()],1),a("Row",{staticClass:"ethnicity-container code-row-bg",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"13"}},[a("div",{staticClass:"ethnicity-count"},[a("Icon",{attrs:{type:"md-arrow-up"}}),t._v("\n        "+t._s(t.group.black_or_african_american)+"%\n      ")],1),a("div",{staticClass:"ethnicity-label"},[t._v("Black or African American")])]),a("Col",{attrs:{span:"5"}},[a("div",{staticClass:"ethnicity-count"},[a("Icon",{attrs:{type:"md-arrow-up"}}),t._v("\n        "+t._s(t.group.white)+"%\n      ")],1),a("div",{staticClass:"ethnicity-label"},[t._v("White")])]),a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"ethnicity-count text-right"},[a("Icon",{attrs:{type:"md-arrow-up"}}),t._v("\n        "+t._s(t.group.prefer_not_to_say)+"%\n      ")],1),a("div",{staticClass:"ethnicity-label text-right"},[t._v("Not Said")])])],1),"published"==t.group.status?a("Poptip",{staticClass:"food-popover",attrs:{placement:"bottom",width:"300"}},[a("Button",{staticClass:"food-popover__btn"},[a("div",{staticClass:"food-popover__btn__before"}),t._v("Foods"),a("div",{staticClass:"food-popover__btn__after"})]),a("div",{staticClass:"food-table",attrs:{slot:"content"},slot:"content"},[a("table",[a("thead",[a("tr",[a("th",[t._v("Name")]),a("th",[t._v("Type")])])]),a("tbody",t._l(t.group.foods,function(e){return a("tr",[a("td",[t._v(t._s(e.name))]),a("td",["veg"==e["type"]||"both"==e["type"]?a("div",{staticClass:"food_type food_type--veg"}):t._e(),"non veg"==e["type"]||"both"==e["type"]?a("div",{staticClass:"food_type food_type--nonveg"}):t._e()])])}),0)])])],1):t._e()],1),a("div",{staticClass:"card-body"},t._l(t.group.results,function(e){return a("Row",{directives:[{name:"drag-drop",rawName:"v-drag-drop"}],key:e.id,staticClass:"user-item",on:{"drag-start":t.handleDragStart,"drag-over":t.handleDragOver,"drag-enter":t.handleDragEnter,"drag-leave":t.handleDragLeave,"drag-end":t.handleDragEnd,drop:t.handleDrop,drag:t.handleDrag}},[a("Col",{attrs:{span:"14"}},[a("div",{staticClass:"avatar"},[a("div",{staticClass:"name-avatar",style:e.survey_meta_data.avatar_gradient,attrs:{size:"small"}},[t._v(t._s(e.name[0]))])]),a("div",{staticClass:"user-info"},[a("div",{staticClass:"username"},[t._v(t._s(e.name))]),a("div",{staticClass:"phone"},[t._v("\n            "+t._s(e.phone)+"\n            "),a("a",{staticClass:"phone__icon",attrs:{href:"tel:"+e.phone}},[a("Icon",{attrs:{type:"ios-call-outline"}})],1)])])]),a("Col",{staticClass:"user-action",class:{is_locked:t.group.isManagerAssigned||t.islocked,is_published:!0},attrs:{span:"10"}},[t.group.isManagerAssigned||t.islocked?a("div",[t.group.manager==e.id||t.group.manager.id==e.id?a("div",{staticClass:"role manager"},[a("Icon",{attrs:{type:"md-ribbon"}}),t._v("Manager")],1):a("div",{staticClass:"role attendee"},[t._v("Attendee")])]):a("Button",{staticClass:"make-manager-btn",attrs:{type:"warning",size:"small"},on:{click:function(a){return t.makeManager(t.group,e)}}},[t._v("Make Manager")]),a("div",{staticClass:"email"},[t._v(t._s(e.email))]),"published"==t.group.status?a("a",{attrs:{href:"select-food/group/"+t.group.id+"/user/"+e.id,target:"_blank"}},[a("Icon",{staticClass:"menu-btn",attrs:{type:"ios-menu"}})],1):t._e()],1)],1)}),1)])},vt=[],bt={handleDragStart:function(t){t.target.classList.add("dragging"),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text","*"),this.vnode.context.$emit("drag-start")}.bind(void 0),handleDragOver:function(t){return t.preventDefault&&t.preventDefault(),t.dataTransfer.dropEffect="move",t.target.classList.add("drag-over"),this.vnode.context.$emit("drag-over"),!1},handleDragEnter:function(t){this.vnode.context.$emit("drag-enter"),t.target.classList.add("drag-enter")},handleDragLeave:function(t){this.vnode.context.$emit("drag-leave"),t.target.classList.remove("drag-enter","drag-over")},handleDrag:function(t){this.vnode.context.$emit("drag")},handleDragEnd:function(t){t.target.classList.remove("dragging","drag-over","drag-enter"),this.vnode.context.$emit("drag-end")},handleDrop:function(t){return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),this.vnode.context.$emit("drop"),!1}};o["default"].directive("drag-drop",{bind:function(t,e,a){bt.el=t,bt.binding=e,bt.vnode=a,t.setAttribute("draggable","true"),t.addEventListener("dragstart",bt.handleDragStart,!1),t.addEventListener("dragenter",bt.handleDragEnter,!1),t.addEventListener("dragover",bt.handleDragOver,!1),t.addEventListener("drag",bt.handleDrag,!1),t.addEventListener("dragleave",bt.handleDragLeave,!1),t.addEventListener("dragend",bt.handleDragEnd,!1),t.addEventListener("drop",bt.handleDrop,!1)},unbind:function(t){t.classList.remove("dragging","drag-over","drag-enter"),t.removeAttribute("draggable"),t.removeEventListener("dragstart",bt.handleDragStart),t.removeEventListener("dragenter",bt.handleDragEnter),t.removeEventListener("dragover",bt.handleDragOver),t.removeEventListener("dragleave",bt.handleDragLeave),t.removeEventListener("drag",bt.handleDrag)}});var yt={props:["group","lockGroup","makeManager","islocked","undoManager","unlockPotluck","publishPotluck"],methods:{handleDragStart:function(t){console.log("handleDragStart",t),this.loggedEvent="handleDragStart"},handleDragOver:function(t){console.log("handleDragOver",t),this.loggedEvent="handleDragOver"},handleDragEnter:function(t){console.log("handleDragEnter",t),this.loggedEvent="handleDragEnter"},handleDragLeave:function(t){console.log("handleDragLeave",t),this.loggedEvent="handleDragLeave"},handleDragEnd:function(t){console.log("handleDragEnd",t),this.loggedEvent="handleDragEnd"},handleDrop:function(t){console.log("handleDrop",this.currentlyDragging,t.target),this.currentlyDragging=null,this.loggedEvent="handleDrop"},handleImageDrop:function(t){console.log("handleImageDrop",this.currentlyDragging,t.target),this.currentlyDragging=null,this.loggedEvent="handleImageDrop"},handleDrag:function(t){console.log("handleDrag",t),this.loggedEvent="handleDrag",this.currentlyDragging||(this.currentlyDragging=t.srcElement)}}},kt=yt,Ct=(a("806e"),Object(m["a"])(kt,_t,vt,!1,null,null,null)),wt=Ct.exports,jt={name:"groups",data:function(){return{groups:[],groupLoading:!1}},components:{PotluckTail:wt},methods:{randomGradient:function(){return{background:ht()}},makeManager:function(t,e){t["isManagerAssigned"]=!0,t.manager=e.id},undoManager:function(t){t["isManagerAssigned"]=!1,delete t.manager},lockGroup:function(t){var e=this,a=(t=JSON.parse(JSON.stringify(t)),t.results.map(function(t){return t.id})),o={name:t.name,manager:t.manager,group_meta_data:t.group_meta_data,attendees:a,attendees_avatar_gradients:t.results.map(function(t){return t.survey_meta_data.avatar_gradient})};K({method:"post",url:"potluck/potluckgroup/",data:JSON.stringify(o)}).then(function(t){e.$Notice.success({title:"Success",desc:"Potluck has been locked"}),e.loadGroups()}).catch(function(t){console.log(t)})},resetGroups:function(){var t=this;K.delete("potluck/potluckgroup/").then(function(e){t.loadGroups()}).catch(function(t){console.log(t)})},loadGroups:function(){var t=this;this.groupsLoading=!0,this.groups=[],K.get("potluck/get_groups/").then(function(e){t.groupsLoading=!1,e.forEach(function(e){var a={black_or_african_american:0,white:0,prefer_not_to_say:0},o=e.results.length;e.results.forEach(function(e){var s=e["ethnic_persuasion"];a[s.replace(/\s/gi,"_")]+=1/o*100,e["survey_meta_data"]={avatar_gradient:{}},e["survey_meta_data"]["avatar_gradient"]=t.randomGradient()}),e["white"]=a["white"].toFixed(1),e["black_or_african_american"]=a["black_or_african_american"].toFixed(1),e["prefer_not_to_say"]=a["prefer_not_to_say"].toFixed(1),e["group_meta_data"]={avatar_gradient:{}},e["group_meta_data"]["avatar_gradient"]=t.randomGradient(),e["isManagerAssigned"]=!1}),t.groups=e}).catch(function(e){t.groupsLoading=!1,console.log(e)})}},computed:{},created:function(){this.loadGroups()}},xt=jt,Pt=(a("44bf"),Object(m["a"])(xt,gt,mt,!1,null,null,null)),St=Pt.exports,Ft=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content-inner"},[o("Tabs",{attrs:{animated:!1,type:"card"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("TabPane",{attrs:{label:"Locked",icon:"md-lock",name:"locked"}},[o("Row",{staticClass:"code-row-bg",attrs:{gutter:50}},[t.lockedPotlucks.length>0&&0==t.potlucksLoading?o("div",t._l(t.lockedPotlucks,function(e){return o("Col",{key:e.id,staticStyle:{"margin-top":"30px"},attrs:{span:"8"}},[o("PotluckTail",{attrs:{group:e,islocked:"true",unlockPotluck:t.unlockPotluck,publishPotluck:t.publishPotluck}})],1)}),1):t._e(),0==t.lockedPotlucks.length&&0==t.potlucksLoading?o("Col",{staticClass:"potlucks-not-found",attrs:{span:"24"}},[o("img",{staticClass:"potlucks-not-found__image",attrs:{src:a("a311")}}),o("div",{staticClass:"potlucks-not-found__description"},[t._v("No potluck groups were locked")]),o("router-link",{staticClass:"nav-link",attrs:{to:"/groups"}},[o("Button",{staticClass:"potlucks-not-found__btn",attrs:{type:"info"}},[t._v("Go to groups")])],1)],1):t._e(),1==t.potlucksLoading?o("Col",{staticStyle:{"margin-top":"50px","text-align":"center"},attrs:{span:"24"}},[o("img",{staticStyle:{"max-width":"180px"},attrs:{src:a("c115")}})]):t._e()],1)],1),o("TabPane",{attrs:{label:"Published",icon:"md-checkbox-outline",name:"published"}},[o("Row",{staticClass:"code-row-bg",attrs:{gutter:50}},[t.publishedPotlucks.length>0&&0==t.potlucksLoading?o("div",t._l(t.publishedPotlucks,function(t){return o("Col",{key:t.id,staticStyle:{"margin-top":"30px"},attrs:{span:"8"}},[o("PotluckTail",{attrs:{group:t,islocked:"true"}})],1)}),1):t._e(),0==t.publishedPotlucks.length&&0==t.potlucksLoading?o("Col",{staticClass:"potlucks-not-found",attrs:{span:"24"}},[o("img",{staticClass:"potlucks-not-found__image",attrs:{src:a("04da")}}),o("div",{staticClass:"potlucks-not-found__description"},[t._v("Seems like you did't publish any potluck yet.")]),o("Button",{staticClass:"potlucks-not-found__btn",attrs:{type:"info"},on:{click:function(e){t.tab="locked"}}},[t._v("Go to locked potlucks")])],1):t._e(),1==t.potlucksLoading?o("Col",{staticStyle:{"margin-top":"50px","text-align":"center"},attrs:{span:"24"}},[o("img",{staticStyle:{"max-width":"180px"},attrs:{src:a("c115")}})]):t._e()],1)],1)],1),o("Modal",{attrs:{width:"40%"},model:{value:t.showPotluckLockModal,callback:function(e){t.showPotluckLockModal=e},expression:"showPotluckLockModal"}},[o("p",{attrs:{slot:"header"},slot:"header"},[o("span",[t._v("Publish Potluck")])]),o("div",{staticStyle:{"text-align":"center"}},[o("Form",{ref:"editablePotluck",attrs:{model:t.editablePotluck,rules:t.publishPotluckValidate,"label-width":150}},[o("FormItem",{attrs:{label:"Group Name",prop:"name"}},[o("Input",{model:{value:t.editablePotluck.name,callback:function(e){t.$set(t.editablePotluck,"name",e)},expression:"editablePotluck.name"}})],1),o("FormItem",{attrs:{label:"Select Foods",prop:"foods"}},[o("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onHideAutoComplete,expression:"onHideAutoComplete"}],staticClass:"auto-complete",on:{click:function(e){t.showFoodList=!0}}},[o("Input",{staticClass:"auto-complete-input",attrs:{type:"text"},on:{input:function(e){return t.filterFood()}},model:{value:t.food,callback:function(e){t.food=e},expression:"food"}}),t.showFoodList?o("div",{staticClass:"auto-complete-list"},[t.filterdFoods.length>0?o("div",[o("div",{staticClass:"auto-complete-item food-item noselect food-item--random-field",on:{click:function(e){return e.target!==e.currentTarget?null:t.randomizeFood(e)}}},[o("Checkbox",{attrs:{value:t.isFoodRandomized},on:{"on-change":function(e){return e.target!==e.currentTarget?null:t.randomizeFood(e)}}},[o("span",{staticClass:"mrl-5"},[t._v("Randomized Select")])])],1),t._l(t.filterdFoods,function(e){return o("div",{key:e.id,staticClass:"auto-complete-item food-item noselect",on:{click:function(a){return t.addOrRemove(t.editablePotluck.foods,e.id)}}},[o("Checkbox",{attrs:{value:t.editablePotluck.foods.includes(e.id)}}),o("span",[t._v(t._s(e.name))]),o("div",{staticClass:"food-item-type"},["veg"==e["type"]||"both"==e["type"]?o("div",{staticClass:"food_type food_type--veg"}):t._e(),"non veg"==e["type"]||"both"==e["type"]?o("div",{staticClass:"food_type food_type--nonveg"}):t._e()])],1)})],2):o("div",{staticClass:"text-center"},[t._v("\n                        No food items found\n                    ")])]):t._e()],1),o("div",{staticClass:"food-pill-liner"},t._l(t.foods,function(e){return o("div",{key:e.id},[t.editablePotluck.foods.includes(e.id)?o("div",{staticClass:"food-pill"},[t._v(t._s(e.name)+" \n                      "),o("Icon",{staticClass:"food-pill-icon",attrs:{type:"ios-close-circle"},on:{click:function(a){return t.addOrRemove(t.editablePotluck.foods,e.id)}}})],1):t._e()])}),0)]),o("FormItem",{staticStyle:{"text-align":"left"},attrs:{label:"Hosting On",prop:"hosting_on"}},[o("DatePicker",{attrs:{type:"date",placeholder:"Select date","start-date":new Date,options:t.dateOptions},model:{value:t.editablePotluck.hosting_on,callback:function(e){t.$set(t.editablePotluck,"hosting_on",e)},expression:"editablePotluck.hosting_on"}})],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{size:"large"},on:{click:t.onClosePublishPotluck}},[t._v("Cancel")]),o("Button",{attrs:{type:"primary",size:"large"},on:{click:t.onPublishPotluck}},[t._v("Publish")])],1)])],1)},It=[],Et=a("75fc"),Ot=(a("f559"),a("2ef0")),Lt=a.n(Ot);o["default"].directive("click-outside",{bind:function(t,e,a){window.event=function(o){t===o.target||t.contains(o.target)||a.context[e.expression](o)},document.body.addEventListener("click",window.event)},unbind:function(t){document.body.removeEventListener("click",window.event)}});var Rt={data:function(){var t,e=function(t,e,a){e.length<=0?a(new Error("Select 5 foods")):a()},a=function(t,e,a){e?a():a(new Error("Hosting On cannot be empty"))};return t={lockedPotlucks:[],publishedPotlucks:[],potlucksLoading:!1,showPotluckLockModal:!1,isFoodRandomized:!1,tab:"locked",food:null,editablePotluck:{name:null,hosting_on:null,foods:[],id:null}},Object(ct["a"])(t,"food",""),Object(ct["a"])(t,"showFoodList",!1),Object(ct["a"])(t,"foods",[]),Object(ct["a"])(t,"filterdFoods",[]),Object(ct["a"])(t,"publishPotluckValidate",{name:[{required:!0,message:"Group Name cannot be empty",trigger:"blur"}],foods:[{required:!0,type:"array",validator:e,trigger:"change"}],hosting_on:[{required:!0,validator:a,trigger:"change"}]}),Object(ct["a"])(t,"dateOptions",{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}}),t},components:{PotluckTail:wt},methods:{onHideAutoComplete:function(t){this.showFoodList=!1},addOrRemove:function(t,e){var a=t.indexOf(e);-1===a?t.push(e):t.splice(a,1),this.isFoodRandomized=!1,this.$refs.editablePotluck.$children[1].form.validate()},initEditablePotluck:function(){this.editablePotluck={name:null,hosting_on:null,foods:[],id:null}},filterFood:function(){var t=this;this.isFoodRandomized=!1,this.filterdFoods=this.foods.filter(function(e){return e.name.toLocaleLowerCase().startsWith(t.food.toLocaleLowerCase())})},randomizeFood:function(){this.isFoodRandomized||(this.editablePotluck.foods=Lt.a.sampleSize(this.filterdFoods,Lt.a.random(5,10)).map(function(t){return t.id})),this.isFoodRandomized=!this.isFoodRandomized,this.showFoodList=!1},loadFoods:function(){var t=this;K.get("potluck/foods/").then(function(e){t.foods=e.results,t.filterdFoods=Object(Et["a"])(e.results)}).catch(function(t){console.log(t)})},loadPotlucks:function(){var t=this;this.potlucksLoading=!0,K.get("potluck/potluckgroup/").then(function(e){var a=e.results;t.lockedPotlucks=[],t.publishedPotlucks=[],t.potlucksLoading=!1,a.forEach(function(e){var a={black_or_african_american:0,white:0,prefer_not_to_say:0},o=e.attendees.length;e.attendees.forEach(function(t){var e=t["ethnic_persuasion"];a[e.replace(/\s/gi,"_")]+=1/o*100}),e.results=e.attendees,e["white"]=a["white"].toFixed(1),e["black_or_african_american"]=a["black_or_african_american"].toFixed(1),e["prefer_not_to_say"]=a["prefer_not_to_say"].toFixed(1),"locked"===e.status?t.lockedPotlucks.push(e):"published"==e.status&&t.publishedPotlucks.push(e)})}).catch(function(e){t.potlucksLoading=!1,console.log(e)})},unlockPotluck:function(t){var e=this;K.delete("potluck/potluckgroup/".concat(t)).then(function(t){e.$Notice.success({title:"Success",desc:t.message}),e.loadPotlucks()})},publishPotluck:function(t){this.showPotluckLockModal=!0,this.isFoodRandomized=!1,this.editablePotluck={name:t.name,foods:Object(Et["a"])(t.foods),hosting_on:t.hosting_on,id:t.id}},onPublishPotluck:function(){var t=this,e=this.editablePotluck.id;this.editablePotluck.status="published",this.editablePotluck.hosting_on=this.editablePotluck.hosting_on.toISOString();var a=JSON.stringify(this.editablePotluck);this.$refs.editablePotluck.validate(function(o){o?K.patch("potluck/potluckgroup/".concat(e),a).then(function(e){t.$Notice.success({title:"Success",desc:e.message}),t.loadPotlucks()}).catch(function(e){t.$Notice.error({title:e.status,desc:e.message}),t.loadPotlucks()}).finally(function(){t.showPotluckLockModal=!1,t.initEditablePotluck(),t.$refs.editablePotluck.resetFields()}):t.$Notice.error({title:"Failed to Publish",desc:"Fill all the required fields"})})},onClosePublishPotluck:function(){this.showPotluckLockModal=!1,this.initEditablePotluck(),this.$refs.editablePotluck.resetFields()}},computed:{},created:function(){this.loadPotlucks(),this.loadFoods()}},Dt=Rt,$t=(a("c6b8"),Object(m["a"])(Dt,Ft,It,!1,null,null,null)),zt=$t.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"content-inner"},[a("div",{staticClass:"search-box"},[a("Row",[a("Col",{staticClass:"search-header",attrs:{span:"24"}},[t._v("Search Criteria")])],1),a("Row",[a("Col",{attrs:{span:"10"}},[a("Input",{attrs:{search:"","enter-button":"",placeholder:"Enter food name"},on:{"on-search":function(e){return t.$refs.foodListGrid.gridFilter()}},model:{value:t.foodListGrid.filterObj.name,callback:function(e){t.$set(t.foodListGrid.filterObj,"name",e)},expression:"foodListGrid.filterObj.name"}})],1)],1)],1),a("Grid",{ref:"foodListGrid",attrs:{config:t.foodListGrid},scopedSlots:t._u([{key:"grid_data_new_td",fn:function(e){return[a("div",{staticClass:"td"},[a("Input",{attrs:{placeholder:""},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"newRowGridData.name"}})],1),a("div",{staticClass:"td"},[a("Select",{model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"newRowGridData.type"}},[a("Option",{key:"veg",attrs:{value:"veg"}},[t._v("Veg")]),a("Option",{key:"non veg",attrs:{value:"non veg"}},[t._v("Non Veg")]),a("Option",{key:"both",attrs:{value:"both"}},[t._v("Both")])],1)],1),a("div",{staticClass:"td td--spacer",staticStyle:{"padding-top":"0","padding-bottom":"0","font-size":"22px"}},[a("Icon",{staticStyle:{color:"green","margin-right":"5px",cursor:"pointer"},attrs:{type:"ios-add-circle-outline"},on:{click:function(a){return t.onRowAdd(e)}}}),a("Icon",{staticStyle:{color:"red",cursor:"pointer"},attrs:{type:"ios-trash-outline"},on:{click:function(a){return t.onRowDelete(e)}}})],1)]}},{key:"grid_no-data",fn:function(){return[a("Icon",{staticClass:"td--no-data-found__icon",attrs:{type:"md-restaurant"}}),a("br"),t._v("\n          No foods found\n      ")]},proxy:!0},{key:"grid_data_row",fn:function(e){return t._l(e.gridResults,function(e,o){return a("div",{key:o,staticClass:"grid-table__body__row"},[a("div",{staticClass:"td",staticStyle:{"padding-top":"10px","padding-bottom":"10px"}},[a("div",{staticStyle:{height:"30px",width:"30px","border-radius":"10px",display:"inline-block",color:"white","text-align":"center","padding-top":"3px","font-weight":"500","margin-right":"6px"},style:e.meta_data.avatar_gradient},[t._v(t._s(e.name[0].toUpperCase()))]),t._v("\n                  "+t._s(e["name"])+" "),a("br")]),a("div",{staticClass:"td",staticStyle:{"padding-top":"10px","padding-bottom":"10px"}},["veg"==e["type"]||"both"==e["type"]?a("div",{staticClass:"food_type food_type--veg"}):t._e(),"non veg"==e["type"]||"both"==e["type"]?a("div",{staticClass:"food_type food_type--nonveg"}):t._e()]),a("div",{staticClass:"td td--spacer",staticStyle:{"padding-top":"10px","padding-bottom":"10px"}})])})}}])})],1)])},Vt=[],Gt={data:function(){return{foodListGrid:{queryObj:{},csvUrl:"potluck/foods/",title:"Available Foods",apiUrl:"potluck/foods/",headers:[{title:"Name",key:"name"},{title:"Type",key:"type"}],filterObj:{name:"",type:""},show_spacer:!0,options:{can_download:!1,can_upload:!1,can_add:!0}}}},components:{Grid:at},methods:{randomGradient:function(){return{background:ht()}},updateFilterObj:function(t,e){e.reduce(function(t,e,a,o){return t[e["key"]]="",t},{})},onRowAdd:function(t){t.gridAdd({name:t.name,type:t.type,meta_data:{avatar_gradient:this.randomGradient()}},t.newGridRowIndex)},onRowDelete:function(t){t.newGridResults.splice(t.newGridRowIndex,1)},beforeMount:function(){console.log("before mounted")}}},Nt=Gt,At=(a("9c4e"),Object(m["a"])(Nt,Mt,Vt,!1,null,"57d92cfa",null)),Ut=At.exports,Bt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"food-select-container"},[o("Row",{staticClass:"content-inner"},[o("Col",{staticClass:"select-food",style:{backgroundImage:"url("+a("426c")+")"},attrs:{span:"18",offset:"3"}},[o("Col",{staticClass:"select-food-menu",style:{backgroundImage:"url("+a("5074")+")"},attrs:{span:"13",offset:"11"}},[o("h1",{staticClass:"banner"},[t._v("Break Bread Menu")]),0==t.foodNotFound&&0==t.potluckFoodsLoading?o("div",[0==t.food_info.current_user_foods.length?o("div",{staticClass:"select-food-menu__helper"},[t._v("Select following food")]):o("div",{staticClass:"select-food-menu__helper success"},[t._v("You have selected following food")]),o("div",{staticClass:"food-menu-legend"},[0==t.food_info.current_user_foods.length?o("div",{staticClass:"food-menu-legend__pill"},[o("div",{staticClass:"food-menu-legend__pill__icon food-menu-legend__pill__icon__available"}),o("div",{staticClass:"food-menu-legend__pill__name"},[t._v("Available")])]):t._e(),t.food_info.current_user_foods.length>0?o("div",{staticClass:"food-menu-legend__pill"},[o("div",{staticClass:"food-menu-legend__pill__icon food-menu-legend__pill__icon__selected"}),o("div",{staticClass:"food-menu-legend__pill__name"},[t._v("Selected")])]):t._e(),o("div",{staticClass:"food-menu-legend__pill"},[o("div",{staticClass:"food-menu-legend__pill__icon food-menu-legend__pill__icon__unavailable"}),o("div",{staticClass:"food-menu-legend__pill__name"},[t._v("Unavailable")])])]),o("div",{staticClass:"select-foods-list"},t._l(t.food_info.available_foods,function(e){return o("FoodItem",{key:e.id,attrs:{className:t.foodItemStatus(e.id),toggleFood:t.toggleFood,food:e}})}),1),0==t.food_info.current_user_foods.length?o("Button",{staticClass:"select-food-menu__submit",attrs:{type:"primary",loading:t.isSubmitting,size:"large",disabled:0==t.selected_foods.length},on:{click:function(e){return t.setFoodGroup()}}},[t.isSubmitting?o("span",[t._v("SUBMITTING...")]):o("span",[t._v("SUBMIT")])]):t._e()],1):t._e(),1==t.potluckFoodsLoading?o("Col",{staticStyle:{"margin-top":"50px","text-align":"center"},attrs:{span:"24"}},[o("img",{staticStyle:{"max-width":"180px"},attrs:{src:a("c115")}})]):t._e(),1==t.foodNotFound?o("div",[o("img",{staticStyle:{"max-width":"120px","margin-top":"80px"},attrs:{src:a("3c20")}}),o("h1",{staticStyle:{"margin-top":"10px",color:"#a4815e","font-size":"22px","font-weight":"inherit"}},[t._v("Menu is unavailable")])]):t._e()],1)],1)],1)],1)},qt=[],Tt=(a("6762"),a("2fdb"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-foods-item",class:t.className,attrs:{name:"select-foods-item"},on:{click:function(e){return t.toggleFood(t.food.id)}}},[a("div",{staticClass:"select-icon"}),a("div",{staticClass:"select-name"},[a("Tooltip",{attrs:{content:t.food.name,placement:"top",delay:1e3}},[a("div",{staticClass:"select-name__content"},[t._v(t._s(t.food.name))])])],1),a("div",{staticClass:"food-item-type"},["veg"==t.food["type"]||"both"==t.food["type"]?a("div",{staticClass:"food_type food_type--veg"}):t._e(),"non veg"==t.food["type"]||"both"==t.food["type"]?a("div",{staticClass:"food_type food_type--nonveg"}):t._e()])])}),Jt=[],Ht={props:["className","food","toggleFood"]},Wt=Ht,Kt=(a("0b5b"),Object(m["a"])(Wt,Tt,Jt,!1,null,"3c39d6d3",null)),Yt=Kt.exports,Zt={data:function(){return{food_info:{available_foods:[],registered_foods:[],current_user_foods:[]},selected_foods:[],group_info:{},user_info:{},foodNotFound:!1,potluckFoodsLoading:!0,isSubmitting:!1}},methods:{loadPotluckFoods:function(){var t=this;this.potluckFoodsLoading=!0,K.get("potluck/select_food/group/".concat(this.$route.params.group_id,"/user/").concat(this.$route.params.user_id,"/"),{hasPermission:!0}).then(function(e){if(t.group_info=e.group_info,t.user_info=e.user_info,t.food_info=e.food_info,e.food_info.current_user_foods.length>0){var a=[],o=[];e.food_info.available_foods.forEach(function(t,s){e.food_info.current_user_foods.includes(t.id)?a.push(t):o.push(t)}),t.food_info.available_foods=[].concat(a,o)}else if(e.food_info.registered_foods.length>0){var s=[],n=[];e.food_info.available_foods.forEach(function(t,a){e.food_info.registered_foods.includes(t.id)?n.push(t):s.push(t)}),t.food_info.available_foods=[].concat(s,n)}t.potluckFoodsLoading=!1}).catch(function(e){t.potluckFoodsLoading=!1,t.foodNotFound=!0,t.$Notice.error({title:"Error",desc:e.message})})},foodItemStatus:function(t){return-1!=this.food_info.current_user_foods.indexOf(t)?"selected":-1!=this.food_info.registered_foods.indexOf(t)||this.food_info.current_user_foods.length>0?"unavailable":-1!=this.selected_foods.indexOf(t)?"active":""},toggleFood:function(t){if(!["selected","unavailable"].includes(this.foodItemStatus(t))){var e=this.selected_foods.indexOf(t);-1===e?this.selected_foods.push(t):this.selected_foods.splice(e,1)}},setFoodGroup:function(){var t=this;this.isSubmitting=!0,K.post("potluck/select_food/group/".concat(this.$route.params.group_id,"/user/").concat(this.$route.params.user_id,"/"),JSON.stringify({selected_foods:this.selected_foods}),{hasPermission:!0}).then(function(e){t.$Notice.success({title:"Success",desc:"Food has been registered successfully"}),t.isSubmitting=!1,t.loadPotluckFoods()}).catch(function(e){t.isSubmitting=!1,t.$Notice.error({title:"Error",desc:error.message})})}},computed:{},created:function(){this.loadPotluckFoods()},components:{FoodItem:Yt}},Xt=Zt,Qt=(a("b061"),Object(m["a"])(Xt,Bt,qt,!1,null,"0a9f8422",null)),te=Qt.exports,ee=[{path:"/",component:it},{path:"/signup",component:F,meta:{layout:"no-sidebar"}},{path:"/login",component:U,meta:{layout:"no-sidebar",isPublic:!0}},{path:"/survey-list",component:it},{path:"/survey-form",component:ft,meta:{layout:"no-sidebar",isPublic:!0}},{path:"/select-food/group/:group_id/user/:user_id",component:te,meta:{layout:"no-sidebar",isPublic:!0}},{path:"/groups",component:St},{path:"/potlucks",component:zt},{path:"/food-list",component:Ut},{path:"*",component:w,meta:{layout:"no-sidebar",isPublic:!0}}],ae=new v["a"]({mode:"history",routes:ee});ae.beforeEach(function(t,e,a){var o=!t.meta.isPublic;V.checkAuth();var s=V.user.authenticated;return o&&!s?a("/login"):s&&"/login"===t.path?a("/"):a()});var oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outer-container"},[a("Header"),a("div",{staticClass:"container"},[a("div",{staticClass:"content"},[t._t("default")],2),a("div",{staticClass:"sidebar"},[a("Sidebar")],1)])],1)},se=[],ne=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"header-wrapper"},[o("div",{staticClass:"logo",class:{active:0==t.isPublic}},[o("router-link",{attrs:{to:"/"}},[o("img",{attrs:{src:a("9d64")}})])],1),o("div",{staticClass:"menu-spacer"},[0==t.isPublic?o("div",{staticClass:"action-menu-container"},[o("Avatar",{staticClass:"user-avatar"},[t._v(t._s(t.userinfo.username[0]))]),o("Dropdown",{attrs:{trigger:"click",placement:"bottom-end"}},[o("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n          "+t._s(t.userinfo.username)+"\n          "),o("Icon",{attrs:{type:"ios-arrow-down"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[o("DropdownItem",[o("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.logout()}}},[t._v("Logout")])])],1)],1)],1):t._e()])])},ie=[],re={data:function(){return{userinfo:{},authenticated:!1,isPublic:!0}},methods:{logout:function(){V.logout()}},mounted:function(){},beforeMount:function(){this.isPublic=!!this.$route.meta.isPublic,V.checkAuth(),this.authenticated=V.user.authenticated,this.authenticated&&(this.userinfo=V.getUserInfo())}},le=re,ce=(a("5452"),Object(m["a"])(le,ne,ie,!1,null,null,null)),de=ce.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-container"},[a("div",{staticClass:"nav-container"},[a("div",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[a("Icon",{attrs:{type:"ios-clipboard-outline"}}),t._v("Survey List\n      ")],1)],1),a("div",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/groups"}},[a("Icon",{attrs:{type:"ios-contacts-outline"}}),t._v("Groups\n      ")],1)],1),a("div",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/potlucks"}},[a("Icon",{attrs:{type:"ios-basket-outline"}}),t._v("Potlucks\n      ")],1)],1),a("div",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/food-list"}},[a("Icon",{attrs:{type:"ios-restaurant-outline"}}),t._v("Foods\n      ")],1)],1)])])},pe=[],fe=(a("f203"),{}),ge=Object(m["a"])(fe,ue,pe,!1,null,null,null),me=ge.exports,he={components:{Header:de,Sidebar:me}},_e=he,ve=(a("773d"),Object(m["a"])(_e,oe,se,!1,null,null,null)),be=ve.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header"),a("div",{staticClass:"container"},[t._t("default")],2),a("Footer")],1)},ke=[],Ce=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},we=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer-bottom"},[a("div",{staticClass:"copy-right"},[t._v("Â© 2003-2019 Inmar Inc.")])])}],je={},xe=je,Pe=(a("53d7"),Object(m["a"])(xe,Ce,we,!1,null,null,null)),Se=Pe.exports,Fe={components:{Header:de,Footer:Se}},Ie=Fe,Ee=(a("0c8f"),Object(m["a"])(Ie,ye,ke,!1,null,"51b677f9",null)),Oe=Ee.exports;o["default"].use(v["a"]),o["default"].use(n.a,{locale:c.a}),o["default"].component("default-layout",be),o["default"].component("no-sidebar-layout",Oe),o["default"].filter("formatDate",function(t){if(t)return r()(String(t)).format("MM-DD-YYYY")}),new o["default"]({el:"#app",router:ae,render:function(t){return t(_)}});var Le=e["default"]=ae},"5c0b":function(t,e,a){"use strict";var o=a("5e27"),s=a.n(o);s.a},"5ce1":function(t,e,a){"use strict";var o=a("3426"),s=a.n(o);s.a},"5e27":function(t,e,a){},"68d7":function(t,e,a){},"6acb":function(t,e,a){"use strict";var o=a("68d7"),s=a.n(o);s.a},"6be1":function(t,e,a){},"730d":function(t,e,a){},"75d6":function(t,e,a){},"773d":function(t,e,a){"use strict";var o=a("05b7"),s=a.n(o);s.a},"806e":function(t,e,a){"use strict";var o=a("75d6"),s=a.n(o);s.a},"87dc":function(t,e,a){"use strict";var o=a("4268"),s=a.n(o);s.a},"9c4e":function(t,e,a){"use strict";var o=a("d01c"),s=a.n(o);s.a},"9d64":function(t,e,a){t.exports=a.p+"img/logo.f6f7c0fc.png"},"9e60":function(t,e,a){},a311:function(t,e,a){t.exports=a.p+"img/locked-potlucks-unavailable.41930e25.png"},a705:function(t,e,a){t.exports=a.p+"img/groups-unavailable.418b3e1c.png"},b061:function(t,e,a){"use strict";var o=a("9e60"),s=a.n(o);s.a},c115:function(t,e,a){t.exports=a.p+"img/bread-loading.ab223b06.svg"},c6b8:function(t,e,a){"use strict";var o=a("4edf"),s=a.n(o);s.a},ca4a:function(t,e,a){},cb0e:function(t,e,a){},d01c:function(t,e,a){},eeaa:function(t,e,a){},f203:function(t,e,a){"use strict";var o=a("0466"),s=a.n(o);s.a},fe0d:function(t,e,a){"use strict";var o=a("eeaa"),s=a.n(o);s.a}});
//# sourceMappingURL=app.d5d1c2cd.js.map